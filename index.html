<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

        var emailCount = document.createElement('div');
        var geemailCount = geemails.length;
        emailCount.innerHTML = "Inbox: "+geemailCount;
        main.appendChild(emailCount);


        for(var i=0; i<window.geemails.length; i++){

          var emailContainer = document.createElement("div");
          emailContainer.className = "emailContainer";
          main.appendChild(emailContainer);

          var date = document.createElement("div");
          date.className = "dateDiv";
          date.innerHTML = window.geemails[i].date;
          emailContainer.appendChild(date);

          var sender = document.createElement("div");
          sender.className = "senderDiv";
          sender.innerHTML = window.geemails[i].sender;
          emailContainer.appendChild(sender);

          var subject = document.createElement("div");
          subject.className = "subjectDiv";
          subject.innerHTML = window.geemails[i].subject;
          emailContainer.appendChild(subject);

          var body = document.createElement("div");
          body.className = "bodyDiv";
          body.innerHTML = window.geemails[i].body;
          emailContainer.appendChild(body);



        }

        setInterval(getNewMessage, 3000);
        

        //eventListener for showing body message
        var divElem = document.getElementsByClassName("emailContainer");
        for(var j=0; j<divElem.length; j++){
          divElem[j].addEventListener("click", showMessage);
        }
        function showMessage(){
          var divClass = this.querySelectorAll(".bodyDiv")[0];
          if(divClass.style.display === "none"){
            divClass.style.display = "block";
          }else{
          divClass.style.display = "none";
          }
        }

      };
    </script>
	</head>
	<body>
		<h1>My gee-mail App</h1>
		<div class="container" id="main">
		</div>
		<div></div>
	</body>
</html>